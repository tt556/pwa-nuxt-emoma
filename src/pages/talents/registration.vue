<template>

  <div class="container">

    <div class="talents-page-content">
      <div class="top-backimage">
        <div class="logo-content">
          <div class="service-title">
            <h1>emoma!</h1>
          </div>
          <div class="catch-copy">
            <p>å¤§å¥½ããªã‚ã®äººã‹ã‚‰ã€<br>ã‚ãªãŸã ã‘ã®ãƒ“ãƒ‡ã‚ªãƒ¬ã‚¿ãƒ¼</p>
          </div>
        </div>
      </div>

      <div class="service-content">
        <div class="service-text">
          <div class="savice-title">
            <h2>ã‚µãƒ¼ãƒ“ã‚¹ã®èª¬æ˜</h2>
          </div>
          <div class="service-p">
            <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ãƒ“ãƒ‡ã‚ªãƒ¬ã‚¿ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ãŸã‚‰ã€ãƒ“ãƒ‡ã‚ªãƒ¬ã‚¿ãƒ¼ã‚’è´ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</p>
            <p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯è‡ªåˆ†ç”¨ã§ã‚ã£ãŸã‚Šã€å‹é”ã¸ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã§ã‚ã£ãŸã‚Šã¨æ§˜ã€…ã§ã™ã€‚</p>
          </div>
        </div>
        <div class="service-image">
          <img src="/img/service.png" alt="" width="100%">
        </div>
      </div>

      <div class="description">
        <div class="description-text">
          <p>å…·ä½“çš„ã«ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå…¥ã£ã¦ã‹ã‚‰ã€<span style="font-weight: bold">ï¼“å›ä»¥å†…</span>ã«å‹•ç”»ã‚’æ’®å½±ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ãŸã ãã¾ã™ã€‚</p>
          <p>å‹•ç”»ã¯åŸºæœ¬çš„ã«ï¼‘æœ¬<span style="font-weight: bold">30ç§’ç¨‹åº¦</span>ã§ãŠé¡˜ã„ã—ã¦ãŠã‚Šã¾ã™ã€‚</p>
        </div>
      </div>

      <div class="talents-use">

        <div class="talents-use-title">
          <h2>ä½¿ã„æ–¹</h2>
        </div>

        <div class="talents-use-text">
          <div class="talnets-use-text-p">
            <p>æ²è¼‰å¾Œã¯åŸºæœ¬çš„ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã‚‹ã¾ã§å¾…ã¤å½¢ã«ãªã‚Šã¾ã™ã€‚ã€€ãœã²SNSãªã©ã‚’ä½¿ç”¨ã—ã€å‘ŠçŸ¥ã—ã¦ãã ã•ã„ã€‚</p>
          </div>
        </div>

        <div class="feature">

          <div class="feature-text">

            <div class="feature-img">
              <img src="/img/cansel.png" alt="" width="100px">
            </div>

            <div class="feature-p">
              <div class="feature-title">
                <p>ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯èƒ½</p>
              </div>
              <div class="feature-texts">
                <p>æ‚ªæ„ãŒã‚ã‚‹ã‚‚ã®ã€è‡ªåˆ†ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«åã™ã‚‹ã‚‚ã®ãªã©ã€å—ã‘ãŸããªã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p>
              </div>
            </div>

          </div>

          <div class="feature-text">

            <div class="feature-img">
              <img src="/img/cash.png" alt="" width="100px">
            </div>

            <div class="feature-p">
              <div class="feature-title">
                <p>è‡ªç”±ãªæ–™é‡‘è¨­å®š</p>
              </div>
              <div class="feature-texts">
                <p>å‹•ç”»ã®å€¤æ®µã¯è‡ªåˆ†ã§è‡ªç”±ã«è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã€€ãã®ä¾¡æ ¼ã®ã†ã¡ï¼’ï¼•ï¼…ã‚’æ‰‹æ•°æ–™ã¨ã—ã¦ã„ãŸã ãã¾ã™ã€‚</p>
              </div>
            </div>
          </div>

        </div>

      </div>

      <div class="flow">
        <div class="flow-title">
          <h2>ç™»éŒ²ã¾ã§ã®æµã‚Œ</h2>
        </div>
        <div class="flow-text">
          <p>ä¸‹è¨˜ã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ç™»éŒ²ã®ç”³è«‹ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚ã€€é‹å–¶ã§å¯©æŸ»ã‚’è¡Œã„ã€é€šéã™ã‚‹ã¨ã‚µã‚¤ãƒˆã«æ²è¼‰ã•ã‚Œã¾ã™ã€‚ã€€å¯©æŸ»ã¯å¿œå‹Ÿè€…æ§˜ã®SNSãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã‚„æ´»å‹•ãªã©ã‚’ç·åˆçš„ã«è€ƒæ…®ã—ã¦è¡Œã„ã¾ã™ã€‚</p>
        </div>
      </div>


    </div>

    <div class="registration-form">

      <div class="registration-text">
        <h2>ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ </h2>
      </div>

      <div class="category">
        <p>ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®é¸æŠ</p>
      </div>
      <!-- <select-form/> -->
      <div class="select-form">
        <select name="category" v-model="talentscategory">
          <option value="YouTuber">YouTuber</option>
          <option value="VTuber">VTuber</option>
          <option value="TikToker">TikToker</option>
          <option value="ãƒ©ã‚¤ãƒãƒ¼">ãƒ©ã‚¤ãƒãƒ¼</option>
          <option value="ã‚¿ãƒ¬ãƒ³ãƒˆ">ã‚¿ãƒ¬ãƒ³ãƒˆ</option>
          <option value="ä¿³å„ª">ä¿³å„ª</option>
          <option value="å¥³å„ª">å¥³å„ª</option>
          <option value="ã‚¤ãƒ³ã‚¹ã‚¿ã‚°ãƒ©ãƒãƒ¼">ã‚¤ãƒ³ã‚¹ã‚¿ã‚°ãƒ©ãƒãƒ¼</option>
          <option value="ãƒ©ãƒƒãƒ‘ãƒ¼">ãƒ©ãƒƒãƒ‘ãƒ¼</option>
        </select>
      </div>

      <div class="talents-name talentsbox">
        <div class="talnets-name ttext">
          <p>åå‰</p>
        </div>
        <div class="talents-name-in tbox">
          <input v-model="tname" type="tname" placeholder="ã€€åå‰">
        </div>
      </div>

      <div class="talents-texts talentsbox">
        <div class="talnets-text ttext">
          <p>è‡ªå·±ç´¹ä»‹æ–‡</p>
        </div>
        <div class="talents-textarea tbox">
          <textarea v-model="ttext" type="ttext" placeholder="ä½ã€…æœ¨æ„›ã§ã™ğŸ¤—emomaã¨ã„ã†ã‚¢ã‚¤ãƒ‰ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒªãƒ¼ãƒ€ãƒ¼ã§ã™âœ¨ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼ğŸ˜"></textarea>
        </div>
      </div>

      <div class="talents-imgs talentsbox">
        <div class="talnets-img ttext">
          <p>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ</p>
        </div>
        <div class="talents-img-in tbox">
          <input @change="fileButton" type="file" placeholder="ã‚¿ãƒ¬ãƒ³ãƒˆã®ãƒˆãƒƒãƒ—ç”»åƒ">
        </div>
      </div>

      <div class="talents-amount talentsbox">
        <div class="talnets-amount-text ttext">
          <p>å‹•ç”»ã®å€¤æ®µ</p>
        </div>
        <div class="talents-amount-in tbox">
          <input v-model="amount" type="amount" placeholder="3000">
        </div>
      </div>

      <div class="talnets-btn">
        <button v-on:click="btnSubmit" class="btn btn-action" type="button" name="button">
          é€ä¿¡
        </button>
      </div>
    </div>
  </div>

</template>

<script>
import firebase from '~/plugins/firebase'
// import SelectForm from '~/components/SelectForm.vue'
import { mapActions, mapState, mapGetters } from 'vuex'
export default {
  data() {
    return {
      // ã‚¿ãƒ¬ãƒ³ãƒˆã®idã¨ã—ã¦ä½¿ç”¨ã™ã‚‹å¤‰æ•°
      tid: '',
      // ã‚«ãƒ†ã‚´ãƒªãƒ¼
      talentscategory: '',
      // ã‚¿ãƒ¬ãƒ³ãƒˆã®åå‰
      tname: '',
      // ã‚¿ãƒ¬ãƒ³ãƒˆã®æ–‡ç« 
      ttext: '',

      amount: ''
    }
  },
  // components: {
  //   SelectForm
  // },
  computed: {
    ...mapState(['filesname', 'blob']),
    ...mapGetters(['getfilesname'])
  },
  methods: {
    fileButton: function(e) {

      e.preventDefault();
      // Get file
      const files = e.target.files;
      // ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«å…¥ã‚Œã‚‹
      this.$filesname = files[0].name;
      console.log(files);
      console.log(this.$filesname);
      // ç”»åƒã‚’Blobå½¢å¼ã«ã—ã¦ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®blobã«å…¥ã‚Œã‚‹
      this.$blob = new Blob(files, { type: "image/jpeg" });
      console.log(this.$blob);
    },
    btnSubmit: function(e) {
      console.log(this.$filesname);
      // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’é¸æŠã—ã€å®šç¾©
      const ref_upload = firebase.storage().ref('ã‚¿ãƒ¬ãƒ³ãƒˆ/').child(this.$filesname);

      // Upload file
      ref_upload.put(this.$blob)

      // æ ¼ç´ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®é¸æŠã€å®šç¾©ï¼ˆã‚¿ãƒ¬ãƒ³ãƒˆã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’childã«å…¥ã‚Œã‚‹ï¼‰
      const ref_talents = firebase.database().ref().child('talents');

      // tid(ã‚¿ãƒ¬ãƒ³ãƒˆã®idã¨ã—ã¦ä½¿ç”¨)ã‚’ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®å­è¦ç´ ã¨ã—ã¦pushã—ã€ãƒ©ãƒ³ãƒ€ãƒ ã«IDã‚’ä½œã‚Šã€ãã®key(id)ã‚’tidã¸å…¥ã‚Œã‚‹
      this.tid = ref_talents.push({}).key;

      // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®é¸æŠã€å®šç¾©ï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ¼ä¸‹ã«tidã‚’childã«å…¥ã‚Œã‚‹ï¼‰
      const ref_talent = firebase.database().ref().child('talents').child(this.tid);

      // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«å…¥ã‚ŒãŸç”»åƒã®URLã‚’å–å¾—
      ref_upload.getDownloadURL().then(url => {
        // å–å¾—ã—ãŸURLã¨åå‰ã€è‡ªå·±ç´¹ä»‹æ–‡ã‚’tidã®å­è¦ç´ ã—ã¦set
        ref_talent.set({
          tfile: url,
          tname: this.tname,
          ttext: this.ttext,
          amount: this.amount
        });

      }).catch(error => {
        console.log(error);

      });

    }
  }
}

</script>

<style scoped>
body {
  font-family: "Noto Sans CJK JP", "NotoSansCJKjp", "FontAwesome", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
  color: #4d4d4d;
  font-weight: 600;
}

p {
  color: #4d4d4d;
}

h2 {
  color: #4d4d4d;
  font-size: 18px;
}

input {
  font-size: 15px;
}

.links {
  text-decoration: none;
}

.top-backimage {
  height: 100%;
  background: linear-gradient(150deg,#00f1e6 15%,rgba(214,56,255,.5) 65%), url(/img/backimage.png);
  background-position: center center;
  background-repeat: no-repeat;
  /* background-attachment: fixed; */
  background-size: cover;
}

.logo-content {
  padding: 0px 0px;
}

.service-title {
  text-align: center;
}

.service-title h1 {
  color: #fff;
  font-size: 3.5em;
  margin-bottom: 20px;
  padding-top: 30px;
}

.catch-copy {
  margin-bottom: 50px;
  text-align: center;
}

.catch-copy p {
  color: #fff;
  font-size: 18px;
  font-weight: 600;
}

.service-content {
  margin: 40px 0;
}

.service-text {
  margin-bottom: 20px;
}

.savice-title {
  text-align: center;
  margin-bottom: 30px;
}

.savice-title h2 {
  font-size: 18px;
  color: #4d4d4d;
}

.service-p {
  margin: 0 auto;
  width: 82%;
  color: #4d4d4d;
  font-weight: 500;
}

.service-p p {

}

.description {
  margin: 0 auto 20px;
  width: 82%;
}

.description-text {

}

.description-text p {

}

.talents-use {
  margin: 50px 0px;
  background-color: #eee;
}

.talents-use-title {
  text-align: center;
  padding: 40px;
}

.talents-use-title h2 {
  color: #4d4d4d;
  font-size: 18px;
}

.talents-use-text {
  width: 82%;
  margin: 0 auto 40px;
}

.talents-use-text p {
}

.feature {
  padding: 20px;
}

.feature-text {
  margin-bottom: 50px;
}

.feature-img {
  width: 100px;
  margin: 0 auto 20px;
}

.feature-title {
  text-align: center;
  margin-bottom: 20px;
  font-weight: 600;
}

.feature-texts {
  width: 82%;
  margin: 0 auto;
}

.flow {
  margin-bottom: 50px;
}

.flow-title {
  text-align: center;
  margin-bottom: 30px;
}

.flow-title h2 {
  color: #4d4d4d;
  font-size: 18px;
}

.flow-text {
  width: 82%;
  margin: 0 auto;
}

.registration-form {
  width: 80%;
  margin: 0 auto;
}

.registration-text {
  text-align: center;
  margin-bottom: 20px;
}

.select-form {
  margin-bottom: 30px;
}


select {
  width: 100%;
  height: 30px;
}

.category {
  margin-bottom: 20px;
}

.category p {

}

.talents-name input {
  width: 100%;
  height: 40px;
  border-radius: 10px;
}

.ttext {
  margin-bottom: 20px;
}

.talents-name-in {

}

.tbox {

}

.talentsbox {
  margin-bottom: 50px;
}

textarea {
  width: 100%;
  height: 100px;
  border-radius: 10px;
  font-size: 15px;
}

.talents-img-in input {

}

.talents-amount-in input {
  border-radius: 10px;
  font-size: 15px;
  height: 30px;
}

.talnets-btn {
  width: 200px;
  margin: 0 auto 20px;
}

button {
  border: 2px solid #4d4d4d;
  background-color: #fff;
  width: 200px;
  border-radius: 30px;
  padding: 10px 0;
  margin-bottom: 50px;
}

/* PC */
@media (min-width: 769px) {

.service-p {
  width: 650px;
}

.service-image {
  text-align: center;
}

.service-image img {
  width: 70%;
  margin: 0 auto;
}

.description {
  width: 650px;
}

.talents-use {
  text-align: center;
}

.flow-text {
  width: 650px;
}

.registration-form {
  text-align: center;
}

textarea {
  width: 50%;
}

.talents-name  {
  width: 50%;
  margin-left: auto;
  margin-right: auto;
}

select {
  width: 50%;
}

.talents-img-in input {
  width: 230px;
}


}




</style>
